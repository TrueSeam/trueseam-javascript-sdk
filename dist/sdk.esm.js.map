{"version":3,"file":"sdk.esm.js","sources":["../src/types/elements/Mountable.ts","../src/types/elements/BaseElement.ts","../src/types/elements/DelayableAnimatableElement.ts","../src/types/elements/custom/FrameContentElement.ts","../src/types/elements/custom/FrameContainerElement.ts","../src/utils/animations.ts","../src/overlay/OverlayManager.ts","../src/utils/dom.ts","../src/storage/SessionStorageManager.ts","../src/index.ts"],"sourcesContent":["type Listener = {\n  type: string;\n  listener: EventListenerOrEventListenerObject;\n  options?: boolean | AddEventListenerOptions;\n};\n\nexport abstract class Mountable<TElement extends HTMLElement = HTMLElement> {\n  private readonly listeners: Array<Listener> = [];\n\n  constructor(protected readonly element: TElement) {}\n\n  protected abstract onAttached(): void;\n\n  public addEventListener<K extends keyof HTMLElementEventMap>(\n    type: K,\n    listener: EventListenerOrEventListenerObject,\n    options?: boolean | AddEventListenerOptions\n  ) {\n    this.element.addEventListener(type, listener, options);\n    this.listeners.push({\n      type,\n      listener,\n      options,\n    });\n  }\n\n  /**\n   * Attaches the element to a parent element\n   * @param parent The parent element\n   */\n  public attachTo(parent: Mountable | TElement): void {\n    if (parent instanceof Mountable) {\n      parent.element.appendChild(this.element);\n    } else {\n      parent.appendChild(this.element);\n    }\n    this.onAttached();\n  }\n\n  /**\n   * Detaches the current element from the tree\n   */\n  public detach(): void {\n    this.element.remove();\n  }\n\n  /**\n   * Detaches the current element and performs cleanup\n   */\n  public destroy(): void {\n    this.detach();\n    while (this.listeners.length > 0) {\n      const { type, listener, options } = this.listeners.pop()!;\n      this.element.removeEventListener(type, listener, options);\n    }\n  }\n\n  /**\n   * Applies styles to the element\n   * @param style A style object\n   */\n  public style(style: Partial<CSSStyleDeclaration>): void {\n    Object.assign(this.element.style, style);\n  }\n}\n","import { Mountable } from \"./Mountable\";\n\nexport class BaseElement<\n  TElement extends HTMLElement\n> extends Mountable<TElement> {\n  constructor({ element }: { element: TElement }) {\n    super(element);\n  }\n\n  protected onAttached(): void {}\n}\n","import { AnimationDefintion } from \"./index\";\nimport { Mountable } from \"./Mountable\";\n\nexport class DelayableAnimatableElement extends Mountable {\n  private animation: Animation;\n\n  constructor({\n    animationDefinition,\n    element,\n  }: {\n    animationDefinition: AnimationDefintion;\n    element: HTMLElement;\n  }) {\n    super(element);\n    this.animation = DelayableAnimatableElement.createAnimation(\n      this.element,\n      animationDefinition\n    );\n  }\n\n  private static createAnimation(\n    element: HTMLElement,\n    animationDefinition: AnimationDefintion\n  ): Animation {\n    const resolvedOptions: KeyframeEffectOptions = {\n      ...animationDefinition.options,\n      duration: animationDefinition.options?.duration ?? 1000,\n    };\n    const keyFrameEffect = new KeyframeEffect(\n      element,\n      animationDefinition.keyFrames,\n      resolvedOptions\n    );\n    return new Animation(keyFrameEffect);\n  }\n\n  public updateAnimation(animationDefinition: AnimationDefintion): void {\n    this.animation = DelayableAnimatableElement.createAnimation(\n      this.element,\n      animationDefinition\n    );\n  }\n\n  protected onAttached(): void {\n    this.animate();\n  }\n\n  public animate(): void {\n    this.animation.play();\n  }\n\n  public finish(): void {\n    this.animation.cancel();\n  }\n}\n","import { Mountable } from \"../Mountable\";\n\nconst EXTERNAL_URL = \"http://localhost:3000\";\n\nexport class FrameContentElement extends Mountable<HTMLIFrameElement> {\n  private readonly handleMessage: (event: MessageEvent) => void;\n  private readonly handleExpandPopup: VoidFunction;\n  private readonly handleClosePopup: VoidFunction;\n  private readonly handleContractPopup: VoidFunction;\n\n  constructor({\n    element,\n    methods,\n  }: {\n    element: HTMLIFrameElement;\n    methods: {\n      onClose: VoidFunction;\n      expandPopup: VoidFunction;\n      contractPopup: VoidFunction;\n    };\n  }) {\n    super(element);\n    this.handleClosePopup = methods.onClose;\n    this.handleContractPopup = methods.contractPopup;\n    this.handleExpandPopup = methods.expandPopup;\n    this.handleMessage = this.onMessage.bind(this);\n    window.addEventListener(\"message\", this.handleMessage);\n  }\n\n  private onMessage(event: MessageEvent): void {\n    if (event.origin !== EXTERNAL_URL) return;\n\n    if (event.data.type === \"CLOSE\") {\n      this.handleClosePopup();\n    } else if (event.data.type === \"EXPAND\") {\n      this.handleExpandPopup();\n    } else if (event.data.type === \"CONTRACT\") {\n      this.handleContractPopup();\n    } else if (event.data.type === \"SETUP\") {\n      this.handleFramePageStyled();\n    } else {\n      console.warn(\"Recv an unexpected message type:\", event.data.type);\n    }\n  }\n\n  private handleFramePageStyled(): void {\n    this.element.style.opacity = \"1\";\n    this.element.style.visibility = \"visible\";\n  }\n\n  private onLoaded(): void {\n    this.element.contentWindow?.postMessage(\n      {\n        type: \"SETUP\",\n      },\n      EXTERNAL_URL\n    );\n  }\n\n  protected onAttached(): void {\n    this.element.onload = this.onLoaded.bind(this);\n  }\n\n  public detach(): void {\n    this.element.style.opacity = \"0\";\n    this.element.style.visibility = \"hidden\";\n  }\n\n  public destroy(): void {\n    window.removeEventListener(\"message\", this.handleMessage);\n  }\n}\n","import { AnimateFadeIn } from \"../../../utils/animations\";\nimport { DelayableAnimatableElement } from \"../DelayableAnimatableElement\";\nimport { AnimationDefintion } from \"../index\";\nimport { FrameContentElement } from \"./FrameContentElement\";\n\nexport class FrameContainerElement extends DelayableAnimatableElement {\n  public static width: number = 800;\n  public static height: number = 600;\n  private isOpened: boolean = false;\n  private readonly frameContent: FrameContentElement;\n\n  constructor({\n    element,\n    animationDefinition,\n    onClose,\n  }: {\n    element: HTMLDivElement;\n    animationDefinition: AnimationDefintion;\n    onClose: VoidFunction;\n  }) {\n    super({\n      element,\n      animationDefinition,\n    });\n    this.frameContent = createFrameContent({\n      onClose,\n      expandPopup: this.expand.bind(this),\n      contractPopup: this.contract.bind(this),\n    });\n  }\n\n  public setIsOpened(isOpened: boolean): void {\n    this.isOpened = isOpened;\n  }\n\n  public setShouldAnimate(shouldAnimate: boolean): void {\n    if (!shouldAnimate) {\n      super.updateAnimation(AnimateFadeIn());\n    }\n  }\n\n  public expand(): void {\n    if (this.isOpened) {\n      this.finish();\n      this.element.style.setProperty(\"width\", \"100%\", \"important\");\n      this.element.style.setProperty(\"height\", \"100%\", \"important\");\n      this.element.style.setProperty(\"border-radius\", \"0px\", \"important\");\n    }\n  }\n\n  public contract(): void {\n    if (this.isOpened) {\n      this.finish();\n      this.element.style.setProperty(\n        \"width\",\n        `${FrameContainerElement.width}px`,\n        \"important\"\n      );\n      this.element.style.setProperty(\n        \"height\",\n        `${FrameContainerElement.height}px`,\n        \"important\"\n      );\n      this.element.style.setProperty(\"border-radius\", \"12px\", \"important\");\n    }\n  }\n\n  public detach(): void {\n    this.element.style.setProperty(\"width\", `${FrameContainerElement.width}px`);\n    this.element.style.setProperty(\n      \"height\",\n      `${FrameContainerElement.height}px`\n    );\n    this.element.style.setProperty(\"border-radius\", \"12px\", \"important\");\n\n    this.frameContent.detach();\n    super.detach();\n  }\n\n  protected onAttached(): void {\n    this.frameContent.attachTo(this);\n    super.onAttached();\n  }\n}\n\nfunction createFrameContent(methods: {\n  onClose: VoidFunction;\n  expandPopup: VoidFunction;\n  contractPopup: VoidFunction;\n}): FrameContentElement {\n  const content = document.createElement(\"iframe\");\n  content.id = \"cozyhome-content\";\n  content.src = \"http://localhost:3000/embed\";\n  const frameContentEl = new FrameContentElement({\n    element: content,\n    methods,\n  });\n  frameContentEl.style({\n    position: \"absolute\",\n    top: \"50%\",\n    left: \"50%\",\n    transform: \"translate(-50%, -50%)\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    width: \"100%\",\n    height: \"100%\",\n    boxSizing: \"border-box\",\n    color: \"white\",\n    border: \"none\",\n    opacity: \"0\",\n    visibility: \"hidden\",\n    backgroundColor: \"black\",\n  });\n  return frameContentEl;\n}\n","import { AnimationDefintion } from \"../types/elements/index\";\n\nexport function AnimateTvOpenIn(w: number, h: number): AnimationDefintion {\n  return {\n    keyFrames: [\n      {\n        width: \"0px\",\n        height: \"0px\",\n        borderTop: \"3px solid black\",\n        borderBottom: \"3px solid black\",\n      },\n      {\n        width: `${w}px`,\n        height: \"0px\",\n        offset: 0.5,\n        borderTop: \"3px solid black\",\n        borderBottom: \"3px solid black\",\n      },\n      {\n        width: `${w}px`,\n        height: `${h}px`,\n        offset: 1,\n        borderTop: \"0px\",\n        borderBottom: \"0px\",\n        boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.3)\",\n      },\n    ],\n    options: {\n      fill: \"forwards\",\n      easing: \"ease-in-out\",\n    },\n  };\n}\n\nexport function AnimateFadeIn(): AnimationDefintion {\n  return {\n    keyFrames: [\n      {\n        offset: 0,\n        opacity: 0,\n      },\n      {\n        offset: 0.5,\n        opacity: 0.5,\n      },\n      {\n        offset: 1,\n        opacity: 1,\n        boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.3)\",\n      },\n    ],\n    options: {\n      fill: \"forwards\",\n      easing: \"ease-in\",\n      duration: 300,\n    },\n  };\n}\n","import { Mountable } from \"../types/elements/Mountable\";\nimport { createBackdrop, createContainer, createFrame } from \"../utils/dom\";\nimport { FrameContainerElement } from \"../types/elements/custom/FrameContainerElement\";\n\nexport class OverlayManager {\n  private readonly containerElement: Mountable;\n  private readonly backdropElement: Mountable;\n  private readonly frameContainerElement: FrameContainerElement;\n\n  private previousBodyOverflow?: string;\n\n  constructor() {\n    this.containerElement = createContainer();\n    this.backdropElement = createBackdrop(this.closePopup.bind(this));\n    this.frameContainerElement = createFrame(this.closePopup.bind(this));\n  }\n\n  public openPopup(options: { shouldAnimate: boolean }): void {\n    const { shouldAnimate } = options;\n\n    this.containerElement.attachTo(document.body);\n    this.backdropElement.attachTo(this.containerElement);\n\n    this.frameContainerElement.setShouldAnimate(shouldAnimate);\n    this.frameContainerElement.attachTo(this.containerElement);\n\n    const body = document.body;\n    this.previousBodyOverflow = body.style.overflow;\n    body.style.overflow = \"hidden\";\n\n    this.frameContainerElement.setIsOpened(true);\n  }\n\n  public closePopup(): void {\n    this.frameContainerElement.detach();\n    this.backdropElement.detach();\n    this.containerElement.detach();\n\n    if (this.previousBodyOverflow !== undefined) {\n      document.body.style.overflow = this.previousBodyOverflow;\n      this.previousBodyOverflow = undefined;\n    } else {\n      document.body.style.overflow = \"\";\n    }\n\n    this.frameContainerElement.setIsOpened(false);\n  }\n\n  public destroy(): void {\n    this.frameContainerElement.destroy();\n    this.backdropElement.destroy();\n    this.containerElement.destroy();\n  }\n}\n","import { Mountable } from \"../types/elements/Mountable\";\nimport { BaseElement } from \"../types/elements/BaseElement\";\nimport { FrameContainerElement } from \"../types/elements/custom/FrameContainerElement\";\nimport { AnimateTvOpenIn } from \"./animations\";\n\nexport function createContainer(): Mountable {\n  const container = document.createElement(\"div\");\n  container.id = \"cozyhome-container\";\n  const containerEl = new BaseElement({ element: container });\n  containerEl.style({\n    position: \"fixed\",\n    inset: \"0\",\n    zIndex: \"2147483647\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  });\n  return containerEl;\n}\n\nexport function createBackdrop(onClick: () => void): Mountable {\n  const backdrop = document.createElement(\"div\");\n  backdrop.id = \"cozyhome-backdrop\";\n  const element = new BaseElement({ element: backdrop });\n  element.style({\n    position: \"absolute\",\n    top: \"0\",\n    left: \"0\",\n    right: \"0\",\n    bottom: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    background: \"rgba(0, 0, 0, 0.5)\",\n    backdropFilter: \"blur(2px)\",\n    zIndex: \"0\",\n  });\n  element.addEventListener(\"click\", onClick);\n  return element;\n}\n\nexport function createFrame(onClose: VoidFunction): FrameContainerElement {\n  const frame = document.createElement(\"div\");\n  frame.id = \"cozyhome-frame\";\n  const frameEl = new FrameContainerElement({\n    element: frame,\n    onClose,\n    animationDefinition: AnimateTvOpenIn(\n      FrameContainerElement.width,\n      FrameContainerElement.height\n    ),\n  });\n  frameEl.style({\n    width: `${FrameContainerElement.width}px`,\n    height: `${FrameContainerElement.height}px`,\n    background: \"black\",\n    zIndex: \"1\",\n    borderRadius: \"12px\",\n    borderTop: \"3px solid black\",\n    borderBottom: \"3px solid black\",\n    overflow: \"hidden\",\n    position: \"relative\",\n    transition: \"width 1s ease, height 1s ease, border-radius 0.5s ease\",\n  });\n  return frameEl;\n}\n","import { Persistable } from \"./Persistable\";\n\nexport class SessionStorageManager implements Persistable<boolean> {\n  constructor() {}\n\n  public save(key: string, content: boolean): void {\n    sessionStorage.setItem(key, JSON.stringify(content));\n  }\n\n  public retrieve(key: string): boolean | undefined {\n    const storedValue = sessionStorage.getItem(key);\n    return storedValue !== null ? JSON.parse(storedValue) : undefined;\n  }\n\n  public delete(key: string): boolean | undefined {\n    const storedValue = sessionStorage.getItem(key);\n    sessionStorage.removeItem(key);\n    return storedValue !== null ? JSON.parse(storedValue) : undefined;\n  }\n}\n","import { OverlayManager } from \"./overlay/OverlayManager\";\nimport { SessionStorageManager } from \"./storage/SessionStorageManager\";\n\n// src/index.ts\n\nconst HAS_OPENED = \"HAS_OPENED\";\n\nexport class CozyHome {\n  private clientToken: string | null = null;\n  private readonly overlayManager: OverlayManager;\n  private readonly storageManager: SessionStorageManager;\n\n  constructor() {\n    this.overlayManager = new OverlayManager();\n    this.storageManager = new SessionStorageManager();\n  }\n\n  public init = (options: { clientToken: string }): void => {\n    this.clientToken = options.clientToken;\n  };\n\n  public open = (): void => {\n    const hasOpened = this.storageManager.retrieve(HAS_OPENED) ?? false;\n    this.overlayManager.openPopup({\n      shouldAnimate: !hasOpened,\n    });\n    this.storageManager.save(HAS_OPENED, true);\n  };\n\n  public close = (): void => {\n    this.overlayManager.closePopup();\n  };\n}\n\n(window as any).CozyHome = new CozyHome();\n"],"names":["Mountable","constructor","element","this","listeners","addEventListener","type","listener","options","push","attachTo","parent","appendChild","onAttached","detach","remove","destroy","length","pop","removeEventListener","style","Object","assign","BaseElement","super","DelayableAnimatableElement","animationDefinition","animation","createAnimation","resolvedOptions","duration","_a","_b","keyFrameEffect","KeyframeEffect","keyFrames","Animation","updateAnimation","animate","play","finish","cancel","EXTERNAL_URL","FrameContentElement","methods","handleClosePopup","onClose","handleContractPopup","contractPopup","handleExpandPopup","expandPopup","handleMessage","onMessage","bind","window","event","origin","data","handleFramePageStyled","console","warn","opacity","visibility","onLoaded","contentWindow","postMessage","onload","FrameContainerElement","isOpened","frameContent","content","document","createElement","id","src","frameContentEl","position","top","left","transform","display","flexDirection","justifyContent","alignItems","width","height","boxSizing","color","border","backgroundColor","createFrameContent","expand","contract","setIsOpened","setShouldAnimate","shouldAnimate","offset","boxShadow","fill","easing","setProperty","OverlayManager","containerElement","container","containerEl","inset","zIndex","createContainer","backdropElement","onClick","backdrop","right","bottom","background","backdropFilter","createBackdrop","closePopup","frameContainerElement","frame","frameEl","w","h","borderTop","borderBottom","borderRadius","overflow","transition","createFrame","openPopup","body","previousBodyOverflow","undefined","SessionStorageManager","save","key","sessionStorage","setItem","JSON","stringify","retrieve","storedValue","getItem","parse","removeItem","HAS_OPENED","CozyHome","clientToken","init","open","hasOpened","storageManager","overlayManager","close"],"mappings":"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"}