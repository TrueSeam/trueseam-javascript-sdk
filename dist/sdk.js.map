{"version":3,"file":"sdk.js","sources":["../src/types/Mountable.ts","../src/types/DelayableAnimatableElement.ts","../src/types/BaseElement.ts","../src/utils/dom.ts","../src/overlay.ts","../src/index.ts"],"sourcesContent":["export abstract class Mountable {\n  constructor(protected readonly element: HTMLElement) {}\n\n  protected abstract onAttached(): void;\n\n  /**\n   * Attaches the element to a parent element\n   * @param parent The parent element\n   */\n  public attachTo(parent: Mountable | HTMLElement): void {\n    if (parent instanceof Mountable) {\n      parent.element.appendChild(this.element);\n    } else {\n      parent.appendChild(this.element);\n    }\n    this.onAttached();\n  }\n\n  /**\n   * Detaches the current element from the tree\n   */\n  public detach(): void {\n    this.element.remove();\n  }\n}\n","import { Mountable } from \"./Mountable\";\n\ntype AnimationDefintion = {\n  keyFrames: Array<Keyframe>;\n  options?: KeyframeEffectOptions;\n};\n\nexport class DelayableAnimatableElement extends Mountable {\n  private readonly animation: Animation;\n\n  constructor({\n    animationDefinition,\n    element,\n  }: {\n    animationDefinition: AnimationDefintion;\n    element: HTMLElement;\n  }) {\n    super(element);\n    const { keyFrames, options = { duration: 1000 } } = animationDefinition;\n    const keyFrameEffect = new KeyframeEffect(this.element, keyFrames, options);\n    this.animation = new Animation(keyFrameEffect);\n  }\n\n  public onAttached(): void {\n    this.animate();\n  }\n\n  public animate(): void {\n    console.log(\"animating\");\n    this.animation.play();\n  }\n}\n","import { Mountable } from \"./Mountable\";\n\nexport class BaseElement extends Mountable {\n  constructor({ element }: { element: HTMLElement }) {\n    super(element);\n  }\n\n  protected onAttached(): void {}\n}\n","import { Mountable } from \"../types/Mountable\";\nimport { DelayableAnimatableElement } from \"../types/DelayableAnimatableElement\";\nimport { BaseElement } from \"../types/BaseElement\";\n\nexport function styleElement(\n  el: HTMLElement,\n  style: Partial<CSSStyleDeclaration>\n) {\n  Object.assign(el.style, style);\n}\n\nexport function createContainer(): Mountable {\n  const container = document.createElement(\"div\");\n  container.id = \"cozyhome-container\";\n  styleElement(container, {\n    position: \"fixed\",\n    inset: \"0\",\n    zIndex: \"2147483647\",\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  });\n  return new BaseElement({ element: container });\n}\n\nexport function createBackdrop(): Mountable {\n  const backdrop = document.createElement(\"div\");\n  backdrop.id = \"cozyhome-backdrop\";\n  styleElement(backdrop, {\n    position: \"absolute\",\n    top: \"0\",\n    left: \"0\",\n    right: \"0\",\n    bottom: \"0\",\n    width: \"100%\",\n    height: \"100%\",\n    background: \"rgba(0, 0, 0, 0.5)\",\n    backdropFilter: \"blur(3px)\",\n    zIndex: \"0\",\n  });\n  return new BaseElement({ element: backdrop });\n}\n\nexport function createFrame(): Mountable {\n  const mockIframe = document.createElement(\"div\");\n  mockIframe.id = \"cozyhome-frame\";\n  styleElement(mockIframe, {\n    width: \"800px\",\n    height: \"600px\",\n    background: \"black\",\n    zIndex: \"1\",\n    borderRadius: \"12px\",\n  });\n  return new DelayableAnimatableElement({\n    element: mockIframe,\n    animationDefinition: {\n      keyFrames: [\n        { transform: \"rotate(0) scale(1)\" },\n        { transform: \"rotate(360deg) scale(0)\" },\n      ],\n    },\n  });\n}\n","import { Mountable } from \"./types/Mountable\";\nimport { createBackdrop, createContainer, createFrame } from \"./utils/dom\";\n\nexport class OverlayManager {\n  private readonly containerElement: Mountable;\n  private readonly backdropElement: Mountable;\n  private readonly frameElement: Mountable;\n\n  constructor() {\n    this.containerElement = createContainer();\n    this.backdropElement = createBackdrop();\n    this.frameElement = createFrame();\n    this.containerElement.attachTo(document.body);\n  }\n\n  public destroy(): void {\n    this.containerElement.detach();\n  }\n\n  public openPopup(): void {\n    this.backdropElement.attachTo(this.containerElement);\n    this.frameElement.attachTo(this.containerElement);\n  }\n\n  public closePopup(): void {\n    this.backdropElement.detach();\n    this.frameElement.detach();\n  }\n}\n","import { OverlayManager } from \"./overlay\";\n\n// src/index.ts\nexport class CozyHome {\n  private clientToken: string | null = null;\n  private readonly overlayManager: OverlayManager;\n\n  constructor() {\n    this.overlayManager = new OverlayManager();\n  }\n\n  public init(options: { clientToken: string }) {\n    this.clientToken = options.clientToken;\n    console.log(\"SDK initialized with token:\", this.clientToken);\n  }\n\n  public open(): void {\n    console.log(\"opening\");\n    this.overlayManager.openPopup();\n  }\n\n  public close(): void {\n    this.overlayManager.closePopup();\n  }\n}\n\n(window as any).CozyHome = new CozyHome();\n"],"names":["Mountable","constructor","element","this","attachTo","parent","appendChild","onAttached","detach","remove","DelayableAnimatableElement","animationDefinition","super","keyFrames","options","duration","keyFrameEffect","KeyframeEffect","animation","Animation","animate","console","log","play","BaseElement","styleElement","el","style","Object","assign","OverlayManager","containerElement","container","document","createElement","id","position","inset","zIndex","display","justifyContent","alignItems","createContainer","backdropElement","backdrop","top","left","right","bottom","width","height","background","backdropFilter","createBackdrop","frameElement","mockIframe","borderRadius","transform","createFrame","body","destroy","openPopup","closePopup","CozyHome","clientToken","overlayManager","init","open","close","window"],"mappings":"qPAAsBA,EACpB,WAAAC,CAA+BC,GAAAC,KAAAD,QAAAA,CAAuB,CAQ/C,QAAAE,CAASC,GACVA,aAAkBL,EACpBK,EAAOH,QAAQI,YAAYH,KAAKD,SAEhCG,EAAOC,YAAYH,KAAKD,SAE1BC,KAAKI,YACP,CAKO,MAAAC,GACLL,KAAKD,QAAQO,QACf,EChBI,MAAOC,UAAmCV,EAG9C,WAAAC,EAAYU,oBACVA,EAAmBT,QACnBA,IAKAU,MAAMV,GACN,MAAMW,UAAEA,EAASC,QAAEA,EAAU,CAAEC,SAAU,MAAWJ,EAC9CK,EAAiB,IAAIC,eAAed,KAAKD,QAASW,EAAWC,GACnEX,KAAKe,UAAY,IAAIC,UAAUH,EACjC,CAEO,UAAAT,GACLJ,KAAKiB,SACP,CAEO,OAAAA,GACLC,QAAQC,IAAI,aACZnB,KAAKe,UAAUK,MACjB,EC5BI,MAAOC,UAAoBxB,EAC/B,WAAAC,EAAYC,QAAEA,IACZU,MAAMV,EACR,CAEU,UAAAK,GAAoB,ECH1B,SAAUkB,EACdC,EACAC,GAEAC,OAAOC,OAAOH,EAAGC,MAAOA,EAC1B,OCNaG,EAKX,WAAA7B,GACEE,KAAK4B,4BDGP,MAAMC,EAAYC,SAASC,cAAc,OAUzC,OATAF,EAAUG,GAAK,qBACfV,EAAaO,EAAW,CACtBI,SAAU,QACVC,MAAO,IACPC,OAAQ,aACRC,QAAS,OACTC,eAAgB,SAChBC,WAAY,WAEP,IAAIjB,EAAY,CAAEtB,QAAS8B,GACpC,CCd4BU,GACxBvC,KAAKwC,2BDgBP,MAAMC,EAAWX,SAASC,cAAc,OAcxC,OAbAU,EAAST,GAAK,oBACdV,EAAamB,EAAU,CACrBR,SAAU,WACVS,IAAK,IACLC,KAAM,IACNC,MAAO,IACPC,OAAQ,IACRC,MAAO,OACPC,OAAQ,OACRC,WAAY,qBACZC,eAAgB,YAChBd,OAAQ,MAEH,IAAId,EAAY,CAAEtB,QAAS0C,GACpC,CC/B2BS,GACvBlD,KAAKmD,wBDiCP,MAAMC,EAAatB,SAASC,cAAc,OAS1C,OARAqB,EAAWpB,GAAK,iBAChBV,EAAa8B,EAAY,CACvBN,MAAO,QACPC,OAAQ,QACRC,WAAY,QACZb,OAAQ,IACRkB,aAAc,SAET,IAAI9C,EAA2B,CACpCR,QAASqD,EACT5C,oBAAqB,CACnBE,UAAW,CACT,CAAE4C,UAAW,sBACb,CAAEA,UAAW,8BAIrB,CCnDwBC,GACpBvD,KAAK4B,iBAAiB3B,SAAS6B,SAAS0B,KAC1C,CAEO,OAAAC,GACLzD,KAAK4B,iBAAiBvB,QACxB,CAEO,SAAAqD,GACL1D,KAAKwC,gBAAgBvC,SAASD,KAAK4B,kBACnC5B,KAAKmD,aAAalD,SAASD,KAAK4B,iBAClC,CAEO,UAAA+B,GACL3D,KAAKwC,gBAAgBnC,SACrBL,KAAKmD,aAAa9C,QACpB,QCxBWuD,EAIX,WAAA9D,GAHQE,KAAA6D,YAA6B,KAInC7D,KAAK8D,eAAiB,IAAInC,CAC5B,CAEO,IAAAoC,CAAKpD,GACVX,KAAK6D,YAAclD,EAAQkD,YAC3B3C,QAAQC,IAAI,8BAA+BnB,KAAK6D,YAClD,CAEO,IAAAG,GACL9C,QAAQC,IAAI,WACZnB,KAAK8D,eAAeJ,WACtB,CAEO,KAAAO,GACLjE,KAAK8D,eAAeH,YACtB,EAGDO,OAAeN,SAAW,IAAIA"}